<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#252e39"
    },
    "button": {
      "background": "#14a7d0"
    }
  },
  "theme": "classic",
  "type": "opt-in",
  "content": {
    "message": "Deze website gebruikt cookies om het gebruik te analyseren en de gebruikerservaring te verbeteren.",
    "dismiss": "Begrepen",
    "allow": "Cookies toestaan",
    "deny": "Weigeren",
    "link": "Meer info",
    "href": "/privacy/" // BELANGRIJK: Maak een privacy-pagina aan en link hier correct!
  },
  onStatusChange: function(status, chosenBefore) {
    var type = this.options.type;
    var didConsent = this.hasConsented();
    if (type == 'opt-in' && didConsent) {
      // Gebruiker heeft toestemming gegeven, activeer de analytics scripts
      activateScripts();
    }
  }
});

function activateScripts() {
    // Zoek alle 'geparkeerde' scripts en activeer ze
    var scripts = document.querySelectorAll("script[type='text/plain'][data-cookiecategory='analytics']");
    scripts.forEach(function(oldScript) {
        var newScript = document.createElement("script");
        // Kopieer alle attributen, behalve 'type' en 'data-cookiecategory'
        Array.from(oldScript.attributes).forEach(attr => {
            if (attr.name !== 'type' && attr.name !== 'data-cookiecategory') {
                newScript.setAttribute(attr.name, attr.value);
            }
        });
        newScript.setAttribute("type", "text/javascript");
        newScript.innerHTML = oldScript.innerHTML;
        oldScript.parentNode.replaceChild(newScript, oldScript);
    });
}

// Als de gebruiker in een vorig bezoek al toestemming heeft gegeven, activeer de scripts dan direct.
if (document.cookie.indexOf('cookieconsent_status=allow') > -1) {
    activateScripts();
}

});
</script>

<!-- Toevoeging voor Election Dashboard -->
{% if page.permalink == '/electiondashboard/' %}
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/assets/js/electiondashboard.js"></script>
{% endif %}

<!-- Toevoeging voor Local Dashboard -->
{% if page.permalink == '/localdashboard/' %}
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="/assets/js/localdashboard.js"></script>
{% endif %}

<!-- Toevoeging voor News Dashboard -->
{% if page.permalink == '/inhetnieuws/' %}
  <script src="/assets/js/inhetnieuws.js"></script>
{% endif %}

<!-- toevoeging voor MeetingParser -->
{% if page.permalink == '/meetingparser/' %}
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js"></script>
  
  <script type="text/babel" src="/assets/js/meetingparser.js"></script>
{% endif %}